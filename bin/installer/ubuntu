#!/bin/bash
# check lsb_release -si
if ! dpkg -s ansible >/dev/null 2>&1; then
    echo -e "${ARROW} ${CYAN}Installing Ansible...${NC}"
    echo -e "   ${RIGHT_ANGLE} ${CYAN}Updating APT Repos${NC}"
    apt-get update 2>&1 > /dev/null
    echo -e "   ${RIGHT_ANGLE} ${CYAN}Installing dependency: ${YELLOW}software-properties-common${NC}"
    apt-get install -y software-properties-common 2>&1 > /dev/null
    echo -e "   ${RIGHT_ANGLE} ${CYAN}Adding Ansible PPA Repo${NC}"
    apt-add-repository -y ppa:ansible/ansible 2>&1 > /dev/null
    echo -e "   ${RIGHT_ANGLE} ${CYAN}Updating APT Repos${NC}"
    apt-get update 2>&1 > /dev/null
    echo -e "   ${RIGHT_ANGLE} ${CYAN}Installing Ansible${NC}"
    apt-get install -y ansible 2>&1 > /dev/null
    echo -e "${ARROW} ${GREEN}Ansible installed!${NC}"
    echo -e "${ARROW} ${CYAN}Installing ansible argument completion...${NC}"
    apt-get install python3-argcomplete 2>&1 > /dev/null
    activate-global-python-argcomplete3 2>&1 > /dev/null
fi

# Check if python3 and pip is installed
if ! dpkg -s python3 >/dev/null 2>&1; then
    echo -e "${ARROW} ${CYAN}Installing Python3...${NC}"
    apt-get install -y python3 2>&1 > /dev/null
    echo -e "${ARROW} ${GREEN}Python3 installed!${NC}"
fi
if ! dpkg -s python3-pip >/dev/null 2>&1; then
    echo -e "${ARROW} ${CYAN}Installing Python3 Pip...${NC}"
    apt-get install -y python3-pip 2>&1 > /dev/null
    echo -e "${ARROW} ${GREEN}Python3 Pip installed!${NC}"
fi
# Check if pip module watchdog is installed
if ! pip3 list | grep watchdog >/dev/null 2>&1; then
    echo -e "${ARROW} ${CYAN}Installing Python3 Watchdog...${NC}"
    pip3 install watchdog 2>&1 > /dev/null
    echo -e "${ARROW} ${GREEN}Python3 Watchdog installed!${NC}"
fi
